<% layout("/layouts/boilerplate") %>

    <form method="post" action="/listings/<%= listing._id %>?_method=PUT" class="needs-validation" novalidate enctype="multipart/form-data" >
<div class="row mt-3" >
    <div class="col-8 offset-2">
        <h3> Edit your Listing</h3>
        <div class="mb-3">
            <label for="title" class="form-label">Title:</label>
            <input name="listing[title]" type="text" value="<%= listing.title %>" class="form-control" required> 
            <div class="valid-feedback" > Looks good!</div>
        </div>

        <div class="mb-3">
            <label for="description" class="form-label"">Description:</label>
            <textarea class="form-control" name="listing[description]" required><%= listing.description %> </textarea > 
                <div class="invalid-feedback"> Please enter a short description</div>
        </div>

        <div class="mb-3">
            <label for="image" class="form-label"">Current Image:</label><br>
            <img src="<%= listing.image.url %>" alt="listing image" class="img-thumbnail" style="width: 200px; height: 200px;">

        <div class="mb-3">
            <label for="image" class="form-label"">Upload new image:</label>
            <input name="listing[image]" type="file" class="form-control" >
           
        </div>

<div class="row">
    <div class="mb-3 col-md-4">
    <label for="price" class="form-label"">Price:</label>
    <input name="listing[price]" type="number" value="<%= listing.price %>" class="form-control" required> 
    <div class="invalid-feedback" > Please enter a valid price.</div>
</div>

<div class="mb-3 col-md-8">
    <label for="country" class="form-label"">Country:</label>
    <input name="listing[country]" type="text" value="<%= listing.country %>" class="form-control" required> 
    <div class="invalid-feedback" > Country name should be valid.</div>
</div>
<div class="mb-3">
    <label for="category" class="form-label">Enter a tag:</label>
    <select class="form-select" name="listing[category]" required aria-label="Category">
        <% if (listing.category) { %>
            <!-- If category exists, set it as the selected option -->
            <option value="<%= listing.category %>" selected><%= listing.category %></option>
        <% } else { %>
            <!-- If no category is set, default to Trending -->
            <option value="Trending" selected>Trending</option>
        <% } %>
        <option value="Trending">Trending</option>
        <option value="Rooms">Rooms</option>
        <option value="IconicCities">Iconic Cities</option>
        <option value="Beach">Beach</option>
        <option value="AmazingViews">Amazing Views</option>
        <option value="Castles">Castles</option>
        <option value="Arctic">Arctic</option>
        <option value="Farms">Farms</option>
        <option value="AmazingPools">Amazing Pools</option>
    </select>
</div>


</div>
        

        <div class="mb-3">
            <label for="location" class="form-label"">Location:</label>
            <input name="listing[location]" type="text" value="<%= listing.location %>" class="form-control" required>
            <div class="invalid-feedback"> Location should be valid</div>
        </div>

        <button class="btn btn-dark add-btn">Edit</button>
    </div>
    </div>
 
     

    </form>
    <br>
   

